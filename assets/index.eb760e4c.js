import{r as S,a as _,S as I,E as N,o as Z,b as q,C as T,P as U,D as W,A as F,W as K,O as J,B as P,M as Q,c as X,d as Y,L as ee,e as te,f as se,g as c,h as u,i as f,w as ne,u as i,F as k,j as M,k as H,m as E,l as A,n as oe,p as re,q as O,s as z,t as B,v as ae,x as ie,y as le,z as ce}from"./vendor.534c85d4.js";const de=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}};de();const V=S([]),m=(s,t)=>{const e=new I,n=`<${s} ${Object.entries(t(0,0,1)).map(a=>`${a[0]}="${a[1]}"`).join(" ")} />`,r=e.parse(n);V.push({type:s,buildAttributes:t,buildGeometry:()=>new N(r.paths[0].toShapes()[0],{depth:1,bevelEnabled:!1})})};m("rect",(s,t,e)=>({x:s,y:t,width:e,height:e}));const ue={type:"rect",buildAttributes:(s,t,e)=>({x:s,y:t,width:e,height:e}),buildGeometry:()=>null};m("circle",(s,t,e)=>({cx:s+e/2,cy:t+e/2,r:e/2}));m("path",(s,t,e)=>({d:"M0 1C0 0.447715 0.447715 0 1 0V0V1H0V1Z",transform:`translate(${s},${t}) scale(${e})`}));m("path",(s,t,e)=>({d:"M0.5 0L0.496774 0.00645187L1 1H0L0.5 0Z",transform:`translate(${s},${t}) scale(${e})`}));m("path",(s,t,e)=>({d:"M1 0V1H0L1 0Z",transform:`translate(${s},${t}) scale(${e})`}));m("path",(s,t,e)=>({d:"M0 0V1H1L0 0Z",transform:`translate(${s},${t}) scale(${e})`}));m("path",(s,t,e)=>({d:"M0 0V1H1V1C1 0.447715 0.552285 0 0 0V0Z",transform:`translate(${s},${t}) scale(${e})`}));m("path",(s,t,e)=>({d:"M1 0V1H0V1C0 0.447715 0.447715 0 1 0V0Z",transform:`translate(${s},${t}) scale(${e})`}));m("path",(s,t,e)=>({d:"M1 0.5V1H0V0.5H1Z",transform:`translate(${s},${t}) scale(${e})`}));m("path",(s,t,e)=>({d:"M1 0.5V0H0V0.5H1Z",transform:`translate(${s},${t}) scale(${e})`}));const he=_(V[0]),G=()=>({selectedShape:he,defaultShape:ue,shapes:V}),fe={props:{color:String,voxelGrid:Array,size:Number},setup(s){const t=s,e=_(),n=_();return Z(()=>{const r=new q;r.background=new T("#716f71");const a=new U(75,1,.1,100);a.position.x=0,a.position.y=0,a.position.z=21,r.add(a);const o=new W(16777215,.8);o.position.set(1,1,1),r.add(o);const d=new F(16777215,.5);r.add(d);const l=new K({canvas:e.value,antialias:!0});let w=Math.min(n.value.clientWidth,n.value.clientHeight);l.setSize(w,w),l.setPixelRatio(Math.min(window.devicePixelRatio,2)),window.addEventListener("resize",()=>{const h=Math.min(n.value.clientWidth,n.value.clientHeight);l.setSize(h,h),l.setPixelRatio(Math.min(window.devicePixelRatio,2))});const p=new J,{defaultShape:L}=G();for(let h=0;h<t.size;h++){t.voxelGrid.push([]);for(let $=0;$<t.size;$++){const b=new P(1,1,1),g=new Q({opacity:0,transparent:!0}),x=new X(b,g);x.position.x=$,x.position.y=h,p.add(x),t.voxelGrid[h].push({mesh:x,shape:L})}}p.rotation.z=Math.PI,p.rotation.y=Math.PI,p.position.x=-t.size/2,p.position.y=t.size/2,r.add(p);{let h=new P(t.size,t.size,t.size),$=new Y(h),b=new ee($,new te);r.add(b)}const y=new se(a,e.value);y.enableDamping=!0,y.autoRotate=!0,y.enablePan=!1,y.enableZoom=!1;const v=()=>{y.update(),l.render(r,a),window.requestAnimationFrame(v)};v()}),(r,a)=>(c(),u("div",{ref:(o,d)=>{d.parent=o,n.value=o},class:"flex items-end justify-end w-3/5"},[f("canvas",{class:"",ref:(o,d)=>{d.canvas=o,e.value=o}},null,512)],512))}},me={class:"space-y-4 overflow-hidden rounded-md shadow-md Editor"},pe=["viewBox"],ve=["width","height"],we=["d"],ye=["width","height"],$e=["d"],ge=["d","stroke-dasharray"],xe={props:{voxelGrid:Array,size:Number,color:String},setup(s){const t=s,{selectedShape:e}=G();let n=50,r=!1,a=!1,o;const d=()=>{o!==void 0&&(o.mesh.material.color.set(t.color),o.mesh.material.opacity=1,o.mesh.material.transparent=!1,o.shape===e.value?(o.mesh.scale.z=o.mesh.scale.z+1,o.mesh.position.z=o.mesh.position.z-.5):(o.shape=e.value,o.mesh.geometry=e.value.buildGeometry()))},l=()=>{o!==void 0&&(o.mesh.material.opacity=0,o.mesh.material.transparent=!0,o.mesh.scale.z=0,o.mesh.position.z=1/2)},w=v=>{o=v,!!a&&(r?l():d())},p=()=>{r=!1,a=!1},L=v=>{a=!0,v.button===0?d():v.button===2&&(r=!0,l())},y=()=>{o=void 0,r=!1,a=!1};return(v,h)=>(c(),u("div",me,[(c(),u("svg",{onContextmenu:h[0]||(h[0]=ne(()=>{},["prevent"])),onMousedown:L,onMouseup:p,onMouseleave:y,width:"100%",height:"100%",viewBox:`0 0 ${s.size*i(n)} ${s.size*i(n)}`,style:{"background-color":"#383838"}},[(c(!0),u(k,null,M(s.voxelGrid,($,b)=>(c(),u(k,{key:b},[(c(!0),u(k,null,M($,(g,x)=>{var C;return c(),H(A(g.shape.type),E({key:x},(C=g.shape.buildAttributes(x*i(n),b*i(n)+1,i(n)-1))!=null?C:{},{class:"cell",onMouseover:De=>w(g),fill:g.mesh.material.transparent?"transparent":g.mesh.material.color.getStyle()}),null,16,["onMouseover","fill"])}),128))],64))),128)),f("defs",null,[f("pattern",{id:"grid",width:i(n),height:i(n),patternUnits:"userSpaceOnUse"},[f("path",{stroke:"#2d2d2d",d:`M 0 0 H ${i(n)} V ${i(n)}`,"stroke-width":"2",fill:"none"},null,8,we)],8,ve)]),f("rect",{class:"pointer-events-none",width:s.size*i(n),height:s.size*i(n),fill:"url(#grid)"},null,8,ye),f("path",{stroke:"#2d2d2d",d:`M 0 0 V ${s.size*i(n)} H ${s.size*i(n)}`,"stroke-width":"2",fill:"none"},null,8,$e),f("path",{d:`M ${s.size*i(n)/2-.5} 0 V ${s.size*i(n)} M 0 ${s.size*i(n)/2+.5} H ${s.size*i(n)}`,"stroke-width":"1","stroke-dasharray":s.size%2==0?"0":"7, 2",stroke:"#232323",fill:"none"},null,8,ge)],40,pe))]))}},_e="modulepreload",j={},be="/pixel-to-voxel/",D=function(t,e){return!e||e.length===0?t():Promise.all(e.map(n=>{if(n=`${be}${n}`,n in j)return;j[n]=!0;const r=n.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":_e,r||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),r)return new Promise((d,l)=>{o.addEventListener("load",d),o.addEventListener("error",l)})})).then(()=>t())};var ze=(s,t)=>{for(const[e,n]of t)s[e]=n;return s};function ke(s){switch(s){case"../assets/icons/palette.js":return D(()=>import("./palette.c25355c5.js"),[]);case"../assets/icons/shapes.js":return D(()=>import("./shapes.984e9b70.js"),[]);default:return new Promise(function(t,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}const Me=["innerHTML"],Le={props:{name:String,fill:String},setup(s){const t=s,e=S({width:24,height:24,viewBox:"0 0 24 24"});let n=_("");oe(()=>t.name,a=>{ke(`../assets/icons/${a}.js`).then(o=>{e.width=o.default.width,e.height=o.default.height,e.viewBox=`0 0 ${o.default.width} ${o.default.height}`,n.value=o.default.content})},{immediate:!0});let r=re(()=>t.fill?`--fill-icon: ${t.fill}`:"");return(a,o)=>(c(),u("svg",E({class:"Icon",style:i(r)},i(e),{innerHTML:i(n)}),null,16,Me))}};var R=ze(Le,[["__scopeId","data-v-fbda738a"]]);const Se={class:"flex flex-col overflow-hidden rounded-md",style:{"background-color":"#383838"}},Ve={class:"relative flex"},Ge={key:0,class:"flex p-4 space-x-4",style:{"background-color":"#383838"}},Ce=["onClick","fill"],Pe={key:1,class:"flex p-4 space-x-4",style:{"background-color":"#383838"}},He=["onClick"],Ee={emits:["update:color"],setup(s,{emit:t}){const e=_("shape"),n=["#e74c3c","#3498db","#2ecc71","#9b59b6","#f1c40f","#fff","#000"],{shapes:r,selectedShape:a}=G();return(o,d)=>(c(),u("div",Se,[f("div",Ve,[f("button",{class:O(["p-2 cursor-pointer",e.value==="shape"?"text-white ":" text-gray-400"]),onClick:d[0]||(d[0]=l=>e.value="shape")},[z(R,{class:"w-5 h-5",name:"shapes"})],2),f("button",{class:O(["p-2 text-white cursor-pointer",e.value==="color"?"text-white ":" text-gray-400"]),onClick:d[1]||(d[1]=l=>e.value="color")},[z(R,{class:"w-5 h-5",name:"palette"})],2)]),e.value==="shape"?(c(),u("div",Ge,[(c(!0),u(k,null,M(i(r),(l,w)=>(c(),u("svg",{onClick:p=>a.value=l,class:"w-4 h-4 cursor-pointer",viewBox:"0 0 1 1",fill:i(a)==l?"white":"white text-opacity-50",key:w},[(c(),H(A(l.type),ae(ie(l.buildAttributes(0,0,1))),null,16))],8,Ce))),128))])):B("",!0),e.value==="color"?(c(),u("div",Pe,[(c(),u(k,null,M(n,l=>f("div",{onClick:w=>t("update:color",l),key:l,class:"w-4 h-4 rounded-full cursor-pointer",style:le(`background-color: ${l}`)},null,12,He)),64))])):B("",!0)]))}},Ae={class:"flex flex-col w-2/5 space-y-4"},Oe={props:{voxelGrid:Array,size:Number},setup(s){const t=_("#ff0000");return(e,n)=>(c(),u("div",Ae,[z(Ee,{color:t.value,"onUpdate:color":n[0]||(n[0]=r=>t.value=r)},null,8,["color"]),z(xe,{color:t.value,voxelGrid:s.voxelGrid,size:s.size},null,8,["color","voxelGrid","size"])]))}};const Be={class:"flex h-full p-4 m-auto"},je={setup(s){const t=_(16),e=S([]);return(n,r)=>(c(),u("div",Be,[z(Oe,{size:t.value,voxelGrid:i(e)},null,8,["size","voxelGrid"]),z(fe,{size:t.value,voxelGrid:i(e)},null,8,["size","voxelGrid"])]))}};ce(je).mount("#app");
